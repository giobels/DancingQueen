<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DancingQueen - Dashboard</title>
    <link rel="shortcut icon" href="assets/icon.png">
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div id="fundoModal">
    </div>
    <div class="modal" id="modalNovaCoreo">
        <div class="containerModal">
            <img src="assets/botao-x.png" class="botaoFechar" onclick="fecharModalNovaCoreo()">
            <span>Nova Coreografia</span>
            <div class="inputsModal">
                <div class="inputModal">
                    <span>Nome</span>
                    <input type="text" class="inputCoreo" id="input_coreografia" placeholder="Coreografia">
                </div>
                <div class="inputModal">
                    <span>Categoria</span>
                    <select class="inputCoreo" id="input_categoria">
                        <option disabled selected>Selecione uma categoria</option>
                        <option value="Flexibilidade">Flexibilidade</option>
                        <option value="Força">Força</option>
                        <option value="Técnica">Técnica</option>
                        <option value="Expressão">Expressão</option>
                    </select>
                </div>
            </div>
            <span class="validacao" id="mensagemcoreo"></span>
            <button class="botaoModal" onclick="novaCoreo()">Criar</button>
        </div>
    </div>

    <div class="modal" id="modalDeletarCoreo">
        <div class="containerModal">
            <img src="assets/botao-x.png" class="botaoFechar" onclick="fecharModalDeletarCoreo()">
            <span>Deletar Coreografia</span>
            <div class="inputsModal">
                <div class="inputModal">
                    <span>Coreografia</span>
                    <select class="inputCoreo" id="select_deletarCoreo">

                    </select>
                </div>
            </div>
            <span class="validacao" id="mensagemdeletar"></span>
            <button class="botaoModal" onclick="deletarCoreo()">Deletar</button>
        </div>
    </div>

    <div class="modal" id="modalIA">
        <div class="containerModal">
            <img src="assets/botao-x.png" class="botaoFechar" onclick="fecharModalIA()">
            <span>QueenIA</span>
            <textarea id="pergunta" type="text" placeholder="Digite a pergunta..."></textarea>
            <br><br>
            <button onclick="gerarResposta()" class="botaoModal">Resposta</button>
            <br><br>
            <div id="resposta"></div>
        </div>
    </div>


    <div class="modal" id="modalFestival">
        <div class="containerModal">
            <img src="assets/botao-x.png" class="botaoFechar" onclick="fecharModalFestival()">
            <span>Cadastrar Festival</span>
            <div class="inputsModal">
                <div class="inputModal">
                    <span>Festival</span>
                    <input type="text" class="inputCoreo" id="input_festival" placeholder="Nome do festival">
                </div>
                <div class="inputModal">
                    <span>Coreografia</span>
                    <select class="inputCoreo" id="select_coreografia">

                    </select>
                </div>
                <div class="inputModal">
                    <span>Data</span>
                    <input type="date" class="inputCoreo" id="input_datafestival">
                </div>

                <div class="inputModal">
                    <span>Nota</span>
                    <input type="number" class="inputCoreo" id="input_notafestival">
                </div>

            </div>
            <span class="validacao" id="mensagemfestival"></span>
            <button class="botaoModal" onclick="cadastrarFestival()">Criar</button>
        </div>
    </div>

    <div class="modal" id="modalManual">
        <div class="containerModal">
            <img src="assets/botao-x.png" class="botaoFechar" onclick="fecharModalManual()">
            <span>Como usar a Dashboard</span>
            <br>
            <span class="paragrafo">Bem Vindo Bailarino(a)!</span>
            <br>
            <span class="paragrafo">
                A DancingQueen tem o bjetivo de te auxiliar em sua jornada com a dança, mantendo seu progresso de
                desempenho e análise detalhada.
                Para começar na aba de coreografia, selecione a opção nova coreografia, preencha todos os campos, com o
                nome da coreografia que você dança/treina e a categoria ou tipo de habilidade que ela mais desenvolve.
                Logo a seguir, ao selecionar Festivais na aba de Coreografia você pode cadastrar todas suas
                apresentações, seja em festivais, seleções, espetáculos ou apenas treinos, como preferir, selecione a
                coreografia apresentada e preencha as demais informações.
                Pronto! Agora a Dashboard vai te mostrar tudo que você precisa saber sobre seu desempenho, mantenha seu
                progresso e evolua cada vez mais!
            </span>
            <br>
            <span class="paragrafo">
                Você também pode consultar as aulas da Marina Bailarina pelo atalho das Aulas, um exelente conteúdo para
                aprimorar suas habilidades! Aproveite!
                Caso você tenha alguma dúvida ou problema através da aba de suporte na central de suporte você pode
                abrir um chamado para a equipe que fornecerá auxilio o mais rápido possível, ou consultar a QueenAI (mas
                use com sabedoria).
            </span>
            <br>
            <span class="paragrafo">
                A arte se revela a cada passo!
            </span>

        </div>
    </div>


    <header>
        <nav>
            <ul class="navbar">
                <li class="nav-links" onclick="encerrarSessao()"> <img src="assets/logout.png">Sair</li>
                <li class="nav-links" onclick="opcaoSuporte1()"> <img src="assets/config.png"> Suporte</li>
                <li class="nav-links" onclick="opcaoDash1()"> <img src="assets/coroa.png">Dashboard</li>
                <li class="nav-links" onclick="opcaoCoreo1()"> <img src="assets/sapatilha.png">Coreografia</li>
            </ul>
            <img src="assets/bailarina.png">
        </nav>
        <div id="opcaoCoreo">
            <ul id="listOpcaoCoreo">
                <li onclick="abrirModalNovaCoreo()">Nova Coreografia</li>
                <li onclick="abrirModalDeletarCoreo()">Deletar Coreografia</li>
                <li onclick="abrirModalFestival()">Festival</li>
            </ul>
        </div>
        <div id="opcaoDash">
            <ul id="listOpcaoDash">
                <li onclick="abrirModalManual()">Manual de uso</li>
                <a href="https://www.youtube.com/@MarinaBailarina">
                    <li>Aulas</li>
                </a>
            </ul>
        </div>
        <div id="opcaoSuporte">
            <ul id="listOpcaoSuporte">
                <a href="https://suportedancingqueen.hipporello.net/desk?">
                    <li>Central de suporte</li>
                </a>
                <li onclick="abrirModalIA()">Consulta por IA</li>
            </ul>
        </div>
    </header>
    <div class="container">
        <div class="lateral">
            <span id="titulo"></span>

            <div class="kpis">
                <div class="kpi">
                    <span class="titulo-kpi">Melhor Desempenho</span>
                    <span class="kpi-info" id="kpiMelhorDesempenho"></span>
                </div>
                <div class="kpi">
                    <span class="titulo-kpi">Desempenho inferior</span>
                    <span class="kpi-info" id="kpiPiorDesempenho"></span>
                </div>
                <div class="kpi">
                    <span class="titulo-kpi">Habilidade para treino</span>
                    <span class="kpi-info" id="kpiHabilidade"></span>
                </div>
            </div>
            <div class="container-grafico">
                <span class="titulo-grafico">Desempenho Geral</span>
                <canvas id="graficoDesempenho" class="grafico"></canvas>
            </div>


        </div>
        <div class="lateral">
            <div class="container-grafico">
                <span class="titulo-grafico">Habilidades</span>
                <canvas id="graficoEvolucao" class="grafico"></canvas>
            </div>
            <div class="container-grafico">
                <span class="titulo-grafico">Análise de Desempenho</span>
                <canvas id="graficoPontuacao" class="grafico"></canvas>
                <br>
                <span class="titulo-select">Coreografia:</span>
                <select id="select_coreoPonto" onchange="obterDadosGraficoPontuacao()"></select>
            </div>
        </div>
    </div>
</body>

</html>

<script>

    titulo.innerHTML = `${sessionStorage.NOME_USUARIO}'s Journey`

    listar();
    obterDadosGraficoPontuacao();
    obterDadosGraficoDesempenho();
    obterDadosGraficoHabilidade()
    listarKpi();

    async function gerarResposta() {
        const pergunta = document.getElementById('pergunta').value;

        const response = await fetch('http://localhost:3300/perguntar', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ pergunta })
        });

        const data = await response.json();

        resposta.style.display = 'block';
        document.getElementById('resposta').innerText = data.resultado;
    }

    let coreopcao = true;
    function opcaoCoreo1() {

        if (coreopcao) {
            opcaoCoreo.style.height = "110px";
            setTimeout(function () { listOpcaoCoreo.style.display = "flex" }, 230);

            coreopcao = false;
        } else {
            opcaoCoreo.style.height = "0px";
            listOpcaoCoreo.style.display = 'none';
            coreopcao = true;
        }

    }

    let dashopcao = true;
    function opcaoDash1() {

        if (dashopcao) {
            opcaoDash.style.height = "100px";
            setTimeout(function () { listOpcaoDash.style.display = "flex" }, 230);

            dashopcao = false;
        } else {
            opcaoDash.style.height = "0px";
            listOpcaoDash.style.display = 'none';
            dashopcao = true;
        }

    }

    let suporteopcao = true;
    function opcaoSuporte1() {

        if (suporteopcao) {
            opcaoSuporte.style.height = "100px";
            setTimeout(function () { listOpcaoSuporte.style.display = "flex" }, 230);

            suporteopcao = false;
        } else {
            opcaoSuporte.style.height = "0px";
            listOpcaoSuporte.style.display = 'none';
            suporteopcao = true;
        }

    }


    function abrirModalNovaCoreo() {
        fundoModal.style.display = "block";
        modalNovaCoreo.style.display = "flex";
        opcaoCoreo.style.height = "0px";
        listOpcaoCoreo.style.display = 'none';
        coreopcao = true;
    }

    function abrirModalIA() {
        fundoModal.style.display = "block";
        modalIA.style.display = "flex";
        opcaoSuporte.style.height = "0px";
        listOpcaoSuporte.style.display = 'none';
        suporteopcao = true;
    }

    function fecharModalIA() {
        fundoModal.style.display = "none";
        modalIA.style.display = "none";
    }

    function fecharModalNovaCoreo() {
        fundoModal.style.display = "none";
        modalNovaCoreo.style.display = "none";
    }

    function abrirModalDeletarCoreo() {
        fundoModal.style.display = "block";
        modalDeletarCoreo.style.display = "flex";
        opcaoCoreo.style.height = "0px";
        listOpcaoCoreo.style.display = 'none';
        coreopcao = true;
    }


    function fecharModalDeletarCoreo() {
        fundoModal.style.display = "none";
        modalDeletarCoreo.style.display = "none";
    }


    function abrirModalFestival() {
        select_coreografia.innerHTML = '<option disabled selected>Selecione uma coreografia</option>';
        fundoModal.style.display = "block";
        modalFestival.style.display = "flex";
        opcaoCoreo.style.height = "0px";
        listOpcaoCoreo.style.display = 'none';
        coreopcao = true;
        listar();
    }

    function fecharModalFestival() {
        fundoModal.style.display = "none";
        modalFestival.style.display = "none";
    }

    function abrirModalManual() {
        fundoModal.style.display = "block";
        modalManual.style.display = "flex";
    }

    function fecharModalManual() {
        fundoModal.style.display = "none";
        modalManual.style.display = "none";
    }

    function novaCoreo() {
        const coreografia = input_coreografia.value.trim();
        const categoria = input_categoria.value.trim();
        const fkUsuario = sessionStorage.ID_USUARIO;

        if (coreografia == '' || categoria == '') {
            mensagemcoreo.innerHTML = 'Preencha todos os campos'
            setTimeout(function () { mensagemcoreo.innerHTML = '' }, 1000)
        } else {
            fetch("/coreo/cadastrar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({

                    coreografiaServer: coreografia,
                    categoriaServer: categoria,
                    usuarioServer: fkUsuario,
                }),
            })
            alert('Nova coreografia adicionada!')
        }
    }

    function cadastrarFestival() {
        const festival = input_festival.value.trim();
        const data = input_datafestival.value;
        const nota = input_notafestival.value.trim();
        const coreo = select_coreografia.value;

        if (festival == '' || data == '' || nota == '' || coreo == 0) {
            mensagemfestival.innerHTML = 'Preencha todos os campos para continuar!'
            setTimeout(function () { mensagemfestival.innerHTML = '' }, 1000)
        } else if (nota < 0 || nota > 10) {
            mensagemfestival.innerHTML = 'Insira uma nota de 0 a 10.'
            setTimeout(function () { mensagemfestival.innerHTML = '' }, 1000)
        }
        else {
            fetch("/festival/cadastrar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({

                    festivalServer: festival,
                    dataServer: data,
                    notaServer: nota,
                    coreoServer: coreo,

                }),
            })

            alert('Novo Festival adicionado!')

        }

    }

    function deletarCoreo() {
        let fkcoreo = select_deletarCoreo.value;

        if (fkcoreo == 0) {
            mensagemdeletar.innerHTML = 'Selecione uma coreografia para deletar'
            setTimeout(function () { mensagemdeletar.innerHTML = '' }, 1000)
        } else {
            fetch("/coreo/deletar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    coreoServer: fkcoreo,

                }),
            })

            fetch("/coreo/deletarCoreo", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    coreoServer: fkcoreo,

                }),
            })

            alert('Coreografia Deletada')

        }
    }


    let listarFirstCall = 0;

    function listar() {
        const fkUsuario = sessionStorage.ID_USUARIO;

        fetch("/coreo/listar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                fkusuarioServer: fkUsuario,
            })
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO entrar()!")

            if (resposta.ok) {
                console.log(resposta);

                let uno = 0;

                resposta.json().then((coreo) => {
                    coreo.forEach((coreografia) => {
                        select_coreografia.innerHTML += `<option value='${coreografia.idCoreografia}'>${coreografia.coreografia}</option>`;

                        if (listarFirstCall == 0) {
                            if (uno == 0) {
                                select_coreoPonto.innerHTML = '<option disabled selected value="0">Selecione uma coreografia</option>';
                                select_deletarCoreo.innerHTML = '<option disabled selected value="0">Selecione uma coreografia</option>';
                                uno = 1;
                            }
                            select_coreoPonto.innerHTML += `<option value='${coreografia.idCoreografia}'>${coreografia.coreografia}</option>`;
                            select_deletarCoreo.innerHTML += `<option value='${coreografia.idCoreografia}'>${coreografia.coreografia}</option>`;
                        }
                    });
                    listarFirstCall = 1;
                });

            } else {

                console.log("Houve um erro ao tentar realizar o login!");

            }

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;
    }

    function listarKpi() {
        const fkUsuario = sessionStorage.ID_USUARIO;

        fetch("/coreo/listarKpi", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                fkusuarioServer: fkUsuario,
            })
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO listarKpi()!")

            if (resposta.ok) {
                console.log(resposta);



                resposta.json().then((coreo) => {
                    let maiorMedia = 0;
                    let menorMedia = 100;
                    let melhorCoreo = 0;
                    let piorCoreo = 0;

                    coreo.forEach((coreografia) => {
                        let coreo = coreografia.coreografia
                        let media = Number(coreografia.media)

                        if (maiorMedia == 0) {
                            maiorMedia = media
                            melhorCoreo = coreo
                            menorMedia = media
                            piorCoreo = coreo
                        } else if (media == 10) {
                            maiorMedia = media
                            melhorCoreo = coreo
                        }
                        else if (media > maiorMedia) {
                            maiorMedia = media
                            melhorCoreo = coreo
                        }
                        else if (media < menorMedia) {
                            menorMedia = media
                            piorCoreo = coreo
                        }

                    });
                    kpiMelhorDesempenho.innerHTML = melhorCoreo + '<span> Média:' + maiorMedia + '</span>';
                    kpiPiorDesempenho.innerHTML = piorCoreo + '<span> Média:' + menorMedia + '</span>';
                });


            } else {

                console.log("Houve um erro ao tentar realizar o login!");

            }

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;
    }


    function obterDadosGraficoPontuacao() {
        let fkcoreo = select_coreoPonto.value;

        fetch(`/medidas/ultimas`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            cache: 'no-store',
            body: JSON.stringify({
                fkcoreoServer: fkcoreo,
            })
        }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGraficoPontuacao(resposta, fkcoreo);

                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    let firtsplot = 0;
    function plotarGraficoPontuacao(resposta, idCoreografia) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'Nota',
                data: [],
                borderColor: '#E09595',
                backgroundColor: '#E09595',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.data_grafico);
            dados.datasets[0].data.push(registro.nota);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config3 = {
            type: 'line',
            data: dados,
        };

        if (firtsplot == 0) {
            const graficoPontuacao = new Chart(
                document.getElementById('graficoPontuacao'),
                config3)

            firtsplot = 1;
        } else {

            let chartStatus = Chart.getChart("graficoPontuacao")
            chartStatus.destroy()

            graficoPontuacao = new Chart(
                document.getElementById('graficoPontuacao'),
                config3)
        }
    }
    // --------------------------------------------------------------------------

    function obterDadosGraficoDesempenho() {
        let fkusuario = sessionStorage.ID_USUARIO;

        fetch(`/medidas/desempenho`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            cache: 'no-store',
            body: JSON.stringify({
                fkusuarioServer: fkusuario,
            })
        }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGraficoDesempenho(resposta, fkusuario);

                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    function plotarGraficoDesempenho(resposta, fkusuario) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: labels,
            datasets: [{
                label: 'Desempenho',
                data: [],
                borderColor: '#89B3DC',
                backgroundColor: '#89b3dcd3',
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            labels.push(registro.coreografia);
            dados.datasets[0].data.push(registro.media);
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config = {
            type: 'bar',
            data: dados,
        };

        const graficoDesempenho = new Chart(
            document.getElementById('graficoDesempenho'),
            config)
    }

    // ------------------------------------------------------------------------------------

    function obterDadosGraficoHabilidade() {
        let fkusuario = sessionStorage.ID_USUARIO;

        fetch(`/medidas/habilidade`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            cache: 'no-store',
            body: JSON.stringify({
                fkusuarioServer: fkusuario,
            })
        }).then(function (response) {
            let habilidade = 0;
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    resposta.reverse();

                    plotarGraficoHabilidade(resposta, fkusuario);

                    let habilidade;
                    let menor;
                    resposta.forEach((categoria) => {
                        let mediaC = Number(categoria.media)
                        if (habilidade == undefined) {
                            habilidade = categoria.categoria
                            menor = mediaC
                        } else {
                            if (mediaC < menor) {
                                habilidade = categoria.categoria
                                menor = mediaC
                            }
                        }
                    });
                    kpiHabilidade.innerHTML = habilidade

                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    function plotarGraficoHabilidade(resposta, fkusuario) {

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labels = [];

        // Criando estrutura para plotar gráfico - dados
        let dados = {
            labels: [
                'Expressão',
                'Técnica',
                'Força',
                'Flexibilidade',
            ],
            datasets: [{
                backgroundColor: [
                    '#e095958f',
                    '#9de29d85',
                    '#bb97e08c',
                    '#89b3dc86',
                ],
                borderColor: [
                    '#E09595',
                    '#9DE29D',
                    '#BB97E0',
                    '#89B3DC',
                ],
                data: [],
                tension: 0.1
            }]
        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        // let plotExpressao = 0;
        // let plotTecnica = 1;
        // let plotForca = 2;
        // let plotFlex = 3;

        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            // labels.push(registro.categoria);
            let categoria = registro.categoria
            let plot;
            if (categoria == 'Expressão') {
                plot = 0;
            } else if (categoria == 'Técnica') {
                plot = 1;
            } else if (categoria == 'Força') {
                plot = 2;
            } else {
                plot = 3;
            }
            dados.datasets[0].data[plot] = registro.media;
        }

        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log(labels)
        console.log('Dados:')
        console.log(dados.datasets)
        console.log('----------------------------------------------')

        // Criando estrutura para plotar gráfico - config
        const config2 = {
            type: 'pie',
            data: dados,
            options: {
                plugins: {
                    legend: {
                        position: 'bottom',
                    },

                }
            }
        };

        const graficoEvolucao = new Chart(
            document.getElementById('graficoEvolucao'),
            config2)
    }


    function encerrarSessao() {
        window.location = 'login.html'
    }
</script>